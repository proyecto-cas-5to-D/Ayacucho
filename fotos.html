<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GastronomÃ­a | Ayacucho</title>

  <!-- CSS (te paso los archivos luego) -->
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="style-fotos.css" />
</head>
<body>
  <nav class="navbar">
    <!-- Logo SVG minimal (sol andino) -->
    <a href="index.html" class="logo" aria-label="Inicio Ayacucho">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <circle cx="12" cy="12" r="4.2" fill="currentColor"></circle>
        <g stroke="currentColor" stroke-width="1.4" stroke-linecap="round">
          <line x1="12" y1="1.6"  x2="12" y2="4.2"></line>
          <line x1="12" y1="19.8" x2="12" y2="22.4"></line>
          <line x1="1.6" y1="12"  x2="4.2" y2="12"></line>
          <line x1="19.8" y1="12" x2="22.4" y2="12"></line>
          <line x1="4.4" y1="4.4"  x2="6.2" y2="6.2"></line>
          <line x1="17.8" y1="17.8" x2="19.6" y2="19.6"></line>
          <line x1="4.4" y1="19.6" x2="6.2" y2="17.8"></line>
          <line x1="17.8" y1="6.2" x2="19.6" y2="4.4"></line>
        </g>
      </svg>
      <span>Ayacucho</span>
    </a>
    <ul class="nav-links">
      <li><a href="historia.html">Historia</a></li>
      <li><a href="gastronomia.html">GastronomÃ­a</a></li>
      <li><a href="lugares.html">Lugares</a></li>
      <li><a href="fotos.html">Fotos</a></li>
    </ul>
  </nav>

  <header class="hero">
    <h1>GuÃ­a Visual de Ayacucho</h1>
    <a href="#iglesias" class="btn" id="destacados">Explorar</a>
  </header>

  <section id="restaurantes" class="section">
    <h2>Restaurantes recomendados</h2>


    <!-- Card que abre modal por hash -->
    <div class="fotoos">
      <a href="#gastronomia" data-search-item>
        <img src="img/Gastronomia.jpg" alt="GastronomÃ­a ayacuchana">
        <h3>GastronomÃ­a</h3>
        <p>Puca picante, qapchi y los aromas andinos mÃ¡s autÃ©nticos.</p>
      </a>
    </div>
  </section>

  <!-- JS: apariciones suaves -->
  <script>
    (function(){
      if (!('IntersectionObserver' in window)) return;
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('in-view'); });
      }, { threshold: 0.1 });
      document.querySelectorAll('section').forEach(sec => io.observe(sec));
    })();
  </script>

  <!-- JS: modales generados automÃ¡ticamente desde anchors con img -->
  <script>
    (function setupModals(){
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        if (anchor.closest('nav') || anchor.classList.contains('btn')) return;

        const id = anchor.getAttribute('href').slice(1);
        const img = anchor.querySelector('img');
        if (!id || !img) return;

        // Accesible title (invisible por CSS que te paso despuÃ©s)
        if (!anchor.querySelector('.card-title')) {
          const title = document.createElement('span');
          title.className = 'card-title sr-only';
          title.textContent = img.alt;
          anchor.appendChild(title);
        }

        if (document.getElementById(id)) return;

        const modal = document.createElement('div');
        modal.id = id;
        modal.className = 'modal';
        modal.innerHTML = `
          <div class="modal-card">
            <a class="close" href="#">&times;</a>
            <div class="modal-img-wrapper"><img src="${img.src}" alt="${img.alt}"></div>
            <p class="modal-caption">${img.alt}</p>
          </div>`;
        document.body.appendChild(modal);
      });

      document.addEventListener('click', e => {
        const modal = e.target.classList.contains('modal') ? e.target : null;
        if (modal) location.hash = '';
      });

      window.addEventListener('keydown', e => {
        if (e.key === 'Escape' && location.hash) location.hash = '';
      });
    })();
  </script>

  <!-- JS: buscador flotante minimal -->
  <script>
    (function makeFloatingSearch(){
      const wrap = document.createElement('div');
      wrap.className = 'floating-search';
      wrap.innerHTML = `
        <button class="fs-toggle" title="Buscar contenidos (/)" aria-label="Abrir buscador">ðŸ”Ž</button>
        <div class="fs-panel" role="dialog" aria-label="Buscador de contenidos">
          <div class="fs-row">
            <input class="fs-input" type="search" placeholder="Buscar: 'GastronomÃ­a', 'Parque', 'Mercado'â€¦" />
            <div class="fs-actions">
              <button class="fs-btn fs-clear" title="Limpiar">Limpiar</button>
              <button class="fs-btn fs-close" title="Cerrar">Cerrar</button>
            </div>
          </div>
          <div class="fs-meta">
            <span class="fs-count">0 resultados</span>
            <span>Atajos: <kbd>/</kbd> abrir â€¢ <kbd>Enter</kbd> abrir 1.Âº</span>
          </div>
        </div>
      `;
      document.body.appendChild(wrap);

      const toggle  = wrap.querySelector('.fs-toggle');
      const panel   = wrap.querySelector('.fs-panel');
      const input   = wrap.querySelector('.fs-input');
      const btnClear= wrap.querySelector('.fs-clear');
      const btnClose= wrap.querySelector('.fs-close');
      const lbCount = wrap.querySelector('.fs-count');

      // Elementos buscables: anchors con img + cualquier [data-search-item]
      const anchorsWithImg = Array.from(document.querySelectorAll('a')).filter(a => a.querySelector('img'));
      const explicitItems  = Array.from(document.querySelectorAll('[data-search-item]'));
      const uniqueSet = new Set([...anchorsWithImg, ...explicitItems]);
      const items = Array.from(uniqueSet).map(a => {
        a.setAttribute('data-search-item',''); // asegura atributo
        const img = a.querySelector('img');
        const text = [
          img?.alt || '',
          a.querySelector('h3')?.textContent || '',
          a.querySelector('p')?.textContent || '',
          (img?.src?.split('/').pop() || '')
        ].join(' ');
        return { el: a, img, haystack: text.toLowerCase() };
      });

      function openPanel(){ panel.classList.add('open'); setTimeout(()=> input.focus(), 0); }
      function closePanel(){ panel.classList.remove('open'); }
      function setCount(n){ lbCount.textContent = n === 1 ? '1 resultado' : `${n} resultados`; }
      function clearHighlights(){ items.forEach(c => c.el.classList.remove('match-outline')); }
      function filter(q){
        const term = q.trim().toLowerCase();
        clearHighlights();
        if (!term){
          items.forEach(c => c.el.classList.remove('hidden'));
          setCount(items.length);
          return [];
        }
        const matches = [];
        items.forEach(c => {
          const ok = c.haystack.includes(term);
          c.el.classList.toggle('hidden', !ok);
          if (ok){ matches.push(c); c.el.classList.add('match-outline'); }
        });
        setCount(matches.length);
        if (matches[0]) matches[0].el.scrollIntoView({ behavior:'smooth', block:'center' });
        return matches;
      }

      toggle.addEventListener('click', () => panel.classList.contains('open') ? closePanel() : openPanel());
      btnClose.addEventListener('click', closePanel);
      btnClear.addEventListener('click', () => { input.value=''; filter(''); input.focus(); });

      window.addEventListener('keydown', e => {
        const activeIsInput = ['INPUT','TEXTAREA'].includes(document.activeElement.tagName) || document.activeElement.isContentEditable;
        if (e.key === '/' && !activeIsInput){ e.preventDefault(); openPanel(); }
        if (e.key === 'Enter' && panel.classList.contains('open')){
          const matches = filter(input.value);
          if (matches[0]) matches[0].el.click();
        }
      });

      let t; input.addEventListener('input', () => {
        clearTimeout(t); t = setTimeout(()=> filter(input.value), 110);
      });

      setCount(items.length);
    })();
  </script>

  <footer class="site-footer">
    <div class="footer-inner">
      <small>Â© 2025 â€” COAR Ayacucho 5Â° D</small>
      <a href="https://instagram.com/" target="_blank" class="footer-social" aria-label="Instagram">
        <i class="fa-brands fa-instagram" aria-hidden="true"></i><span class="sr-only">Instagram</span>
      </a>
    </div>
  </footer>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
</body>
</html>
